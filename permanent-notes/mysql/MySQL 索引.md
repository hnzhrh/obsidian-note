---
title: MySQL 索引
tags:
  - permanent-note
  - middleware/database/mysql/index
date: 2025-03-13
time: 17:31
aliases: 
done: false
---
# 什么是索引？

# 索引的分类
## 按物理存储分类
* 聚簇索引 
* 非聚簇索引
## 按字段特性分类
* 主键索引（PRIMARY KEY）
* 唯一索引（UNIQUE）
* 普通索引（INDEX）
* 全文索引（FULLTEXT）
## 按字段个数分类
* 单列索引
* 联合索引
## 特殊索引分类
* 覆盖索引
* 降序索引
* 自适应哈希索引（AHI）
* 隐藏索引（MySQL 8.0+）
# 索引数据结构

# 索引创建与管理
## 创建语法进阶
- 多列索引顺序选择
- 前缀索引长度计算
- 函数索引（MySQL 8.0+）
## 索引维护策略
- OPTIMIZE TABLE 原理
- 在线 DDL 操作（ALGORITHM=INPLACE）
## 索引监控与诊断
- SHOW INDEX 关键指标解读
- INFORMATION_SCHEMA 统计表
- 执行计划 (EXPLAIN) 深度分析
# 索引优化策略
## 索引设计原则
## 索引失效场景
## 索引合并优化 （Index Merge）
## 索引下推 （ICP）
## MRR 优化原理










# 大纲


## 一、索引基础概念
### 1.1 索引的定义与作用
- 数据检索加速原理
- 索引与全表扫描的代价对比

### 1.2 索引的代价与权衡
- 写操作性能损耗分析
- 存储空间占用计算模型
- 维护成本与碎片化问题

## 二、索引类型体系
### 2.1 逻辑分类
#### 2.1.1 主键索引（PRIMARY KEY）
- 唯一性约束与聚簇特性
- 主键选择的最佳实践

#### 2.1.2 唯一索引（UNIQUE）
- 业务唯一性保证机制
- NULL 值的特殊处理规则

#### 2.1.3 普通索引（INDEX）
- 非唯一性索引应用场景
- 覆盖索引优化原理

#### 2.1.4 全文索引（FULLTEXT）
- 倒排索引实现原理
- 自然语言搜索与布尔搜索模式

### 2.2 物理结构分类
#### 2.2.1 聚簇索引
- 数据存储物理顺序管理
- InnoDB 引擎的聚簇实现

#### 2.2.2 非聚簇索引
- 二级索引结构解析
- 回表查询机制与优化

## 三、索引数据结构
### 3.1 B+Tree 深度解析
- 平衡树结构与高度控制
- 节点分裂与合并算法
- 范围查询优化原理

### 3.2 Hash 索引
- 自适应哈希索引（AHI）
- Memory 引擎实现差异

### 3.3 R-Tree 索引
- 空间数据索引原理
- GIS 应用场景分析

### 3.4 倒排索引
- 全文检索实现细节
- N-gram 分词器工作原理

## 四、存储引擎索引实现
### 4.1 InnoDB 索引架构
- 聚簇索引组织表
- Change Buffer 优化机制

### 4.2 MyISAM 索引实现
- 非聚簇存储结构
- 压缩索引特性

### 4.3 内存引擎索引对比
- MEMORY 引擎哈希索引
- NDB 集群引擎特性

## 五、索引创建与管理
### 5.1 创建语法进阶
- 多列索引顺序选择
- 前缀索引长度计算
- 函数索引（MySQL 8.0+）

### 5.2 索引维护策略
- OPTIMIZE TABLE 原理
- 在线 DDL 操作（ALGORITHM=INPLACE）

### 5.3 索引监控与诊断
- SHOW INDEX 关键指标解读
- INFORMATION_SCHEMA 统计表
- 执行计划 (EXPLAIN) 深度分析

## 六、索引优化策略
### 6.1 索引设计原则
- 最左前缀匹配原理
- 索引选择性计算
- 三星索引设计法

### 6.2 索引失效场景
- 隐式类型转换风险
- 函数操作导致的失效
- 范围查询后的列失效

### 6.3 高级优化技术
- 索引合并优化（Index Merge）
- 索引下推（ICP）
- MRR 优化原理

## 七、特殊索引类型
### 7.1 覆盖索引
- 避免回表查询策略
- 覆盖索引扩展技巧

### 7.2 自适应哈希索引
- AHI 触发条件
- 性能提升效果分析

### 7.3 降序索引（MySQL 8.0+）
- 降序索引存储结构
- 混合排序优化

### 7.4 隐藏索引（MySQL 8.0+）
- 索引可见性控制
- 灰度发布场景应用

## 八、索引最佳实践
### 8.1 OLTP 场景优化
- 高并发写入索引策略
- 热点数据索引设计

### 8.2 数据仓库优化
- 星型模型索引策略
- 列式存储索引差异

### 8.3 云原生环境适配
- 分布式数据库索引变化
- 读写分离架构索引策略

## 九、索引诊断工具链
### 9.1 性能模式（Performance Schema）
- 索引使用统计
- 锁竞争分析

### 9.2 sys Schema 应用
- 索引使用情况视图
- 冗余索引检测

### 9.3 pt-index-usage 工具
- 慢查询索引分析
- 索引使用模式跟踪

## 十、未来发展趋势
### 10.1 机器学习索引优化
- 自动索引推荐系统
- 基于负载的索引调整

### 10.2 新硬件适配
- PMEM 存储索引优化
- GPU 加速索引扫描

### 10.3 多模型数据库索引
- JSON 索引增强
- 图数据索引支持

# Reference